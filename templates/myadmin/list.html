{% extends "./base.html" %}
{% load static %}
{% load myfilter %}
{% block mainbody %}
    <div class="alert alert-warning alert-dismissible hidden" role="alert">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
                aria-hidden="true">&times;</span></button>
        <strong>Warning!</strong> Better check yourself, you're not looking too good.
    </div>

    <p>游戏列表</p>
    <p><a class="btn-lg btn-primary" href="{% url "myadmin.game.link" %}">添加游戏合集</a>
    </p>
    <!-- 分页 -->
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if pagitor.has_previous %}
                <li>
                    <a href="{% url "myadmin.game.list" page=1 %}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            {% endif %}
            {% for p in pagitor.paginator.page_range %}
                <li {% if p == pagitor.number %}class="active"{% endif %}>
                    <a href="{% url "myadmin.game.list" page=p %}">{{ p }}</a></li>
            {% endfor %}
            {% if pagitor.has_next %}
                <li>
                    <a href="{% url "myadmin.game.list" page=pagitor.next_page_number %}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>
    <ul class="list-group">
        {% for game in pagitor.object_list %}
            <li class="list-group-item">
                <span class="col-md-4"><a href="{% url 'detail' game_id=game.gameId %}">{{ game.titleCh }}</a></span>
                <span><img src="{{ game.cover|first|show_pic:"cover,list_icon_w200" }}" width="120"/></span>
                <span>{% ifequal game.hasChinese True %}有中文{% else %}无中文{% endifequal %}</span>
                <span>
                    {% for console in game.platform|split:',' %}
                    <img src="{% static icons|get_item:console %}" alt="{{ console }}" style="width: 40px; margin-right: 16px; ">
                    {% endfor %}
                </span>
                <a href="{% url "myadmin.game.link" %}?game_id={{ game.gameId }}"
                   class="btn btn-default btn-sm glyphicon glyphicon-wrench">
                    关联游戏数据</a>

                <a href="{% url "myadmin.game.magzine" game_id=game.gameId %}"
                   class="btn btn-default btn-sm glyphicon glyphicon-list-alt">
                    关联媒体评测</a>

                <button type="button" class="btn btn-danger btn-sm glyphicon glyphicon-trash" data-toggle="modal"
                        data-target="#unlinkModal" data-gid="{{ game.gameId }}"
                        data-url="{% url "myadmin.game.link.unlink" game_id=game.gameId %}">
                    删除关联数据
                </button>

            </li>
        {% endfor %}
    </ul>
    <!-- 分页 -->
    <nav aria-label="Page navigation">
        <ul class="pagination">
            {% if pagitor.has_previous %}
                <li>
                    <a href="{% url "myadmin.game.list" page=1 %}" aria-label="Previous">
                        <span aria-hidden="true">&laquo;</span>
                    </a>
                </li>
            {% endif %}
            {% for p in pagitor.paginator.page_range %}
                <li {% if p == pagitor.number %}class="active"{% endif %}>
                    <a href="{% url "myadmin.game.list" page=p %}">{{ p }}</a></li>
            {% endfor %}
            {% if pagitor.has_next %}
                <li>
                    <a href="{% url "myadmin.game.list" page=pagitor.next_page_number %}" aria-label="Next">
                        <span aria-hidden="true">&raquo;</span>
                    </a>
                </li>
            {% endif %}
        </ul>
    </nav>

    <!-- Modal -->
    <div class="modal fade" id="unlinkModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                            aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">危险操作警告</h4>
                </div>
                <div class="modal-body">
                    你确定要删除这条数据吗？不可逆哦！
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">我再考虑考虑</button>
                    <button type="button" class="btn btn-danger">真的要删除</button>
                </div>
            </div>
        </div>
    </div>

<script type="text/javascript">

</script>
{% endblock %}